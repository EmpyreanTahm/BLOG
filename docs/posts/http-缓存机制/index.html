<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <script type="text/javascript" src="https://latest.cactus.chat/cactus.js"></script>
  <link rel="stylesheet" href="https://latest.cactus.chat/style.css" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> HTTP 缓存机制 | GeekKery</title>
  <meta name="google-site-verification" content="FZMz_7s8NfUWqk6Jhj7XTO-uF-fCf8GNLP3a9Ki95rQ" />
  <link rel = 'canonical' href = '/posts/http-%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6/'>
  <meta name="description" content="GeekKery | Jayden 的个人博客 | web 前端技术文章">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="HTTP 缓存机制" />
<meta property="og:description" content="HTTP 缓存通过资源复用，可以减轻服务器负担，显著提高网站和应用程序的性能。HTTP 缓存主要有客户端缓存和代理缓存，其它还包括网关缓存、CDN、反向代理缓存和负载均衡器等部署在服务器上的缓存方式。HTTP 缓存主要存储 GET 响应。
以 Chrome 为例，打开新标签页后调出 DevTools，将功能切至 NetWork，首次访问 Google 搜索页面，能看到请求：
ctrl &#43; r 刷新页面，可看到请求：
在 Size 一栏中，可以看到部分资源来自 Memory Cache，部分来自 Disk Cache，其余从服务器获取。在首次访问页面之后，浏览器会将资源缓存，后续访问这些资源时，可直接从缓存中获取，不必再从服务器下载。
根据是否需要重新向服务器发起请求来分类，可以将 HTTP 缓存分为两类：强缓存和协商缓存。强缓存如果生效，不需要再和服务器发生交互，而协商缓存不管是否生效，都需要与服务端发生交互。强缓存的优先级高于协商缓存。
强缓存 强缓存指首次向服务器发起资源请求后，服务器会告知客户端资源缓存的有效时间，有效期内直接从客户端缓存中读取，不必与服务器交互。强缓存通过 Expires 和 Cache-Control 首部字段来实现，后者优先级更高。
Expires HTTP/1.0 定义了 Expires 响应首部字段，用于告知客户端资源缓存的过期时间，在过期时间之前请求资源直接使用缓存，不需要再次请求服务器（排除其它首部字段干扰的情况下）。
1Expires: Mon, 25 Jan 2021 23:04:06 GMT Expires 过期时间由服务器生成，是否过期的判定最终需要参考客户端时间。客户端和服务器时间可能不一致，而且客户端的时间是可以自行修改的，修改客户端时间可能导致缓存失效（如浏览器时间参考操作系统时间，修改系统时间会影响到缓存），所以不一定满足预期。
Cache-Control 为弥补 Expires 的缺点，HTTP/1.1 新增了 Cache-Control 通用首部字段，时间值为相对时间，且不依赖客户端时间，优先级高于 Expires。
   指令 类型 说明     no-cache 通用 资源正常缓存，但使用前必须进行协商校验   no-store 通用 禁用所有缓存，从源服务器获取资源   public 响应 共享缓存（中间代理和 CDN等）和私有缓存（客户端）都可以缓存响应，缺省值为 private   private 响应 只有私有缓存可以缓存响应   max-age = N 响应 缓存有效期（单位秒），为 0 时与 no-cache 效果一致   s-maxage = N 响应 覆盖 max-age，只适用于共享缓存，私有缓存会忽略   must-revalidation 响应 在缓存过期前可以使用，过期（如缓存时间超过 max-age）后必须向服务器验证   proxy-revalidation 响应 与 must-revalidate 作用相同，但仅适用于共享缓存，私有缓存会忽略。   no-transform 通用 代理不可更改媒体类型如 Content-Encoding、Content-Range、Content-Type    对于那些改动频率极低的资源如 CSS 或 JS 库，常见的做法是将 max-age 的值设为 31536000，代表一年内缓存有效。如果在缓存有效期内，内容资源内容发生了改动，可以修改资源名称，如在资源名称中加版本号或生成随机 hash。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/http-%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6/" />
<meta property="article:published_time" content="2021-01-09T12:26:02+08:00" />
<meta property="article:modified_time" content="2021-01-09T12:26:02+08:00" />

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="HTTP 缓存机制"/>
<meta name="twitter:description" content="HTTP 缓存通过资源复用，可以减轻服务器负担，显著提高网站和应用程序的性能。HTTP 缓存主要有客户端缓存和代理缓存，其它还包括网关缓存、CDN、反向代理缓存和负载均衡器等部署在服务器上的缓存方式。HTTP 缓存主要存储 GET 响应。
以 Chrome 为例，打开新标签页后调出 DevTools，将功能切至 NetWork，首次访问 Google 搜索页面，能看到请求：
ctrl &#43; r 刷新页面，可看到请求：
在 Size 一栏中，可以看到部分资源来自 Memory Cache，部分来自 Disk Cache，其余从服务器获取。在首次访问页面之后，浏览器会将资源缓存，后续访问这些资源时，可直接从缓存中获取，不必再从服务器下载。
根据是否需要重新向服务器发起请求来分类，可以将 HTTP 缓存分为两类：强缓存和协商缓存。强缓存如果生效，不需要再和服务器发生交互，而协商缓存不管是否生效，都需要与服务端发生交互。强缓存的优先级高于协商缓存。
强缓存 强缓存指首次向服务器发起资源请求后，服务器会告知客户端资源缓存的有效时间，有效期内直接从客户端缓存中读取，不必与服务器交互。强缓存通过 Expires 和 Cache-Control 首部字段来实现，后者优先级更高。
Expires HTTP/1.0 定义了 Expires 响应首部字段，用于告知客户端资源缓存的过期时间，在过期时间之前请求资源直接使用缓存，不需要再次请求服务器（排除其它首部字段干扰的情况下）。
1Expires: Mon, 25 Jan 2021 23:04:06 GMT Expires 过期时间由服务器生成，是否过期的判定最终需要参考客户端时间。客户端和服务器时间可能不一致，而且客户端的时间是可以自行修改的，修改客户端时间可能导致缓存失效（如浏览器时间参考操作系统时间，修改系统时间会影响到缓存），所以不一定满足预期。
Cache-Control 为弥补 Expires 的缺点，HTTP/1.1 新增了 Cache-Control 通用首部字段，时间值为相对时间，且不依赖客户端时间，优先级高于 Expires。
   指令 类型 说明     no-cache 通用 资源正常缓存，但使用前必须进行协商校验   no-store 通用 禁用所有缓存，从源服务器获取资源   public 响应 共享缓存（中间代理和 CDN等）和私有缓存（客户端）都可以缓存响应，缺省值为 private   private 响应 只有私有缓存可以缓存响应   max-age = N 响应 缓存有效期（单位秒），为 0 时与 no-cache 效果一致   s-maxage = N 响应 覆盖 max-age，只适用于共享缓存，私有缓存会忽略   must-revalidation 响应 在缓存过期前可以使用，过期（如缓存时间超过 max-age）后必须向服务器验证   proxy-revalidation 响应 与 must-revalidate 作用相同，但仅适用于共享缓存，私有缓存会忽略。   no-transform 通用 代理不可更改媒体类型如 Content-Encoding、Content-Range、Content-Type    对于那些改动频率极低的资源如 CSS 或 JS 库，常见的做法是将 max-age 的值设为 31536000，代表一年内缓存有效。如果在缓存有效期内，内容资源内容发生了改动，可以修改资源名称，如在资源名称中加版本号或生成随机 hash。"/>

  
  
    
  
  
  <link rel="stylesheet" href="/css/styles.c05d68261bf086a9d7713c4f8a6215a3601608e267a816a7ee58f139b3d1aae51222aae2081c8e0c6bd35e1334773b7a16283022f31f92afd93bb37e5e822e66.css" integrity="sha512-wF1oJhvwhqnXcTxPimIVo2AWCOJnqBan7ljxObPRquUSIqriCByODGvTXhM0dzt6FigwIvMfkq/ZO7N&#43;XoIuZg==">

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="/images/favicon.ico" />

  
  
  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Writings</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" /posts/%E5%B8%B8%E7%94%A8%E7%9A%84%E4%B8%80%E4%BA%9B%E5%91%BD%E4%BB%A4%E8%A1%8C/" aria-label="Previous">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="/posts/%E6%B5%85%E6%9E%90-https/" aria-label="Next">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#" aria-label="Share">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=%2fposts%2fhttp-%25E7%25BC%2593%25E5%25AD%2598%25E6%259C%25BA%25E5%2588%25B6%2f" aria-label="Facebook">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=%2fposts%2fhttp-%25E7%25BC%2593%25E5%25AD%2598%25E6%259C%25BA%25E5%2588%25B6%2f&text=HTTP%20%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6" aria-label="Twitter">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=%2fposts%2fhttp-%25E7%25BC%2593%25E5%25AD%2598%25E6%259C%25BA%25E5%2588%25B6%2f&title=HTTP%20%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6" aria-label="Linkedin">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=%2fposts%2fhttp-%25E7%25BC%2593%25E5%25AD%2598%25E6%259C%25BA%25E5%2588%25B6%2f&is_video=false&description=HTTP%20%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6" aria-label="Pinterest">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=HTTP%20%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6&body=Check out this article: %2fposts%2fhttp-%25E7%25BC%2593%25E5%25AD%2598%25E6%259C%25BA%25E5%2588%25B6%2f" aria-label="Email">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=%2fposts%2fhttp-%25E7%25BC%2593%25E5%25AD%2598%25E6%259C%25BA%25E5%2588%25B6%2f&title=HTTP%20%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6" aria-label="Pocket">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=%2fposts%2fhttp-%25E7%25BC%2593%25E5%25AD%2598%25E6%259C%25BA%25E5%2588%25B6%2f&title=HTTP%20%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6" aria-label="reddit">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=%2fposts%2fhttp-%25E7%25BC%2593%25E5%25AD%2598%25E6%259C%25BA%25E5%2588%25B6%2f&name=HTTP%20%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6&description=HTTP%20%e7%bc%93%e5%ad%98%e9%80%9a%e8%bf%87%e8%b5%84%e6%ba%90%e5%a4%8d%e7%94%a8%ef%bc%8c%e5%8f%af%e4%bb%a5%e5%87%8f%e8%bd%bb%e6%9c%8d%e5%8a%a1%e5%99%a8%e8%b4%9f%e6%8b%85%ef%bc%8c%e6%98%be%e8%91%97%e6%8f%90%e9%ab%98%e7%bd%91%e7%ab%99%e5%92%8c%e5%ba%94%e7%94%a8%e7%a8%8b%e5%ba%8f%e7%9a%84%e6%80%a7%e8%83%bd%e3%80%82HTTP%20%e7%bc%93%e5%ad%98%e4%b8%bb%e8%a6%81%e6%9c%89%e5%ae%a2%e6%88%b7%e7%ab%af%e7%bc%93%e5%ad%98%e5%92%8c%e4%bb%a3%e7%90%86%e7%bc%93%e5%ad%98%ef%bc%8c%e5%85%b6%e5%ae%83%e8%bf%98%e5%8c%85%e6%8b%ac%e7%bd%91%e5%85%b3%e7%bc%93%e5%ad%98%e3%80%81CDN%e3%80%81%e5%8f%8d%e5%90%91%e4%bb%a3%e7%90%86%e7%bc%93%e5%ad%98%e5%92%8c%e8%b4%9f%e8%bd%bd%e5%9d%87%e8%a1%a1%e5%99%a8%e7%ad%89%e9%83%a8%e7%bd%b2%e5%9c%a8%e6%9c%8d%e5%8a%a1%e5%99%a8%e4%b8%8a%e7%9a%84%e7%bc%93%e5%ad%98%e6%96%b9%e5%bc%8f%e3%80%82HTTP%20%e7%bc%93%e5%ad%98%e4%b8%bb%e8%a6%81%e5%ad%98%e5%82%a8%20GET%20%e5%93%8d%e5%ba%94%e3%80%82%0a%e4%bb%a5%20Chrome%20%e4%b8%ba%e4%be%8b%ef%bc%8c%e6%89%93%e5%bc%80%e6%96%b0%e6%a0%87%e7%ad%be%e9%a1%b5%e5%90%8e%e8%b0%83%e5%87%ba%20DevTools%ef%bc%8c%e5%b0%86%e5%8a%9f%e8%83%bd%e5%88%87%e8%87%b3%20NetWork%ef%bc%8c%e9%a6%96%e6%ac%a1%e8%ae%bf%e9%97%ae%20Google%20%e6%90%9c%e7%b4%a2%e9%a1%b5%e9%9d%a2%ef%bc%8c%e8%83%bd%e7%9c%8b%e5%88%b0%e8%af%b7%e6%b1%82%ef%bc%9a%0actrl%20%2b%20r%20%e5%88%b7%e6%96%b0%e9%a1%b5%e9%9d%a2%ef%bc%8c%e5%8f%af%e7%9c%8b%e5%88%b0%e8%af%b7%e6%b1%82%ef%bc%9a%0a%e5%9c%a8%20Size%20%e4%b8%80%e6%a0%8f%e4%b8%ad%ef%bc%8c%e5%8f%af%e4%bb%a5%e7%9c%8b%e5%88%b0%e9%83%a8%e5%88%86%e8%b5%84%e6%ba%90%e6%9d%a5%e8%87%aa%20Memory%20Cache%ef%bc%8c%e9%83%a8%e5%88%86%e6%9d%a5%e8%87%aa%20Disk%20Cache%ef%bc%8c%e5%85%b6%e4%bd%99%e4%bb%8e%e6%9c%8d%e5%8a%a1%e5%99%a8%e8%8e%b7%e5%8f%96%e3%80%82%e5%9c%a8%e9%a6%96%e6%ac%a1%e8%ae%bf%e9%97%ae%e9%a1%b5%e9%9d%a2%e4%b9%8b%e5%90%8e%ef%bc%8c%e6%b5%8f%e8%a7%88%e5%99%a8%e4%bc%9a%e5%b0%86%e8%b5%84%e6%ba%90%e7%bc%93%e5%ad%98%ef%bc%8c%e5%90%8e%e7%bb%ad%e8%ae%bf%e9%97%ae%e8%bf%99%e4%ba%9b%e8%b5%84%e6%ba%90%e6%97%b6%ef%bc%8c%e5%8f%af%e7%9b%b4%e6%8e%a5%e4%bb%8e%e7%bc%93%e5%ad%98%e4%b8%ad%e8%8e%b7%e5%8f%96%ef%bc%8c%e4%b8%8d%e5%bf%85%e5%86%8d%e4%bb%8e%e6%9c%8d%e5%8a%a1%e5%99%a8%e4%b8%8b%e8%bd%bd%e3%80%82%0a%e6%a0%b9%e6%8d%ae%e6%98%af%e5%90%a6%e9%9c%80%e8%a6%81%e9%87%8d%e6%96%b0%e5%90%91%e6%9c%8d%e5%8a%a1%e5%99%a8%e5%8f%91%e8%b5%b7%e8%af%b7%e6%b1%82%e6%9d%a5%e5%88%86%e7%b1%bb%ef%bc%8c%e5%8f%af%e4%bb%a5%e5%b0%86%20HTTP%20%e7%bc%93%e5%ad%98%e5%88%86%e4%b8%ba%e4%b8%a4%e7%b1%bb%ef%bc%9a%e5%bc%ba%e7%bc%93%e5%ad%98%e5%92%8c%e5%8d%8f%e5%95%86%e7%bc%93%e5%ad%98%e3%80%82%e5%bc%ba%e7%bc%93%e5%ad%98%e5%a6%82%e6%9e%9c%e7%94%9f%e6%95%88%ef%bc%8c%e4%b8%8d%e9%9c%80%e8%a6%81%e5%86%8d%e5%92%8c%e6%9c%8d%e5%8a%a1%e5%99%a8%e5%8f%91%e7%94%9f%e4%ba%a4%e4%ba%92%ef%bc%8c%e8%80%8c%e5%8d%8f%e5%95%86%e7%bc%93%e5%ad%98%e4%b8%8d%e7%ae%a1%e6%98%af%e5%90%a6%e7%94%9f%e6%95%88%ef%bc%8c%e9%83%bd%e9%9c%80%e8%a6%81%e4%b8%8e%e6%9c%8d%e5%8a%a1%e7%ab%af%e5%8f%91%e7%94%9f%e4%ba%a4%e4%ba%92%e3%80%82%e5%bc%ba%e7%bc%93%e5%ad%98%e7%9a%84%e4%bc%98%e5%85%88%e7%ba%a7%e9%ab%98%e4%ba%8e%e5%8d%8f%e5%95%86%e7%bc%93%e5%ad%98%e3%80%82%0a%e5%bc%ba%e7%bc%93%e5%ad%98%20%e5%bc%ba%e7%bc%93%e5%ad%98%e6%8c%87%e9%a6%96%e6%ac%a1%e5%90%91%e6%9c%8d%e5%8a%a1%e5%99%a8%e5%8f%91%e8%b5%b7%e8%b5%84%e6%ba%90%e8%af%b7%e6%b1%82%e5%90%8e%ef%bc%8c%e6%9c%8d%e5%8a%a1%e5%99%a8%e4%bc%9a%e5%91%8a%e7%9f%a5%e5%ae%a2%e6%88%b7%e7%ab%af%e8%b5%84%e6%ba%90%e7%bc%93%e5%ad%98%e7%9a%84%e6%9c%89%e6%95%88%e6%97%b6%e9%97%b4%ef%bc%8c%e6%9c%89%e6%95%88%e6%9c%9f%e5%86%85%e7%9b%b4%e6%8e%a5%e4%bb%8e%e5%ae%a2%e6%88%b7%e7%ab%af%e7%bc%93%e5%ad%98%e4%b8%ad%e8%af%bb%e5%8f%96%ef%bc%8c%e4%b8%8d%e5%bf%85%e4%b8%8e%e6%9c%8d%e5%8a%a1%e5%99%a8%e4%ba%a4%e4%ba%92%e3%80%82%e5%bc%ba%e7%bc%93%e5%ad%98%e9%80%9a%e8%bf%87%20Expires%20%e5%92%8c%20Cache-Control%20%e9%a6%96%e9%83%a8%e5%ad%97%e6%ae%b5%e6%9d%a5%e5%ae%9e%e7%8e%b0%ef%bc%8c%e5%90%8e%e8%80%85%e4%bc%98%e5%85%88%e7%ba%a7%e6%9b%b4%e9%ab%98%e3%80%82%0aExpires%20HTTP%2f1.0%20%e5%ae%9a%e4%b9%89%e4%ba%86%20Expires%20%e5%93%8d%e5%ba%94%e9%a6%96%e9%83%a8%e5%ad%97%e6%ae%b5%ef%bc%8c%e7%94%a8%e4%ba%8e%e5%91%8a%e7%9f%a5%e5%ae%a2%e6%88%b7%e7%ab%af%e8%b5%84%e6%ba%90%e7%bc%93%e5%ad%98%e7%9a%84%e8%bf%87%e6%9c%9f%e6%97%b6%e9%97%b4%ef%bc%8c%e5%9c%a8%e8%bf%87%e6%9c%9f%e6%97%b6%e9%97%b4%e4%b9%8b%e5%89%8d%e8%af%b7%e6%b1%82%e8%b5%84%e6%ba%90%e7%9b%b4%e6%8e%a5%e4%bd%bf%e7%94%a8%e7%bc%93%e5%ad%98%ef%bc%8c%e4%b8%8d%e9%9c%80%e8%a6%81%e5%86%8d%e6%ac%a1%e8%af%b7%e6%b1%82%e6%9c%8d%e5%8a%a1%e5%99%a8%ef%bc%88%e6%8e%92%e9%99%a4%e5%85%b6%e5%ae%83%e9%a6%96%e9%83%a8%e5%ad%97%e6%ae%b5%e5%b9%b2%e6%89%b0%e7%9a%84%e6%83%85%e5%86%b5%e4%b8%8b%ef%bc%89%e3%80%82%0a1Expires%3a%20Mon%2c%2025%20Jan%202021%2023%3a04%3a06%20GMT%20Expires%20%e8%bf%87%e6%9c%9f%e6%97%b6%e9%97%b4%e7%94%b1%e6%9c%8d%e5%8a%a1%e5%99%a8%e7%94%9f%e6%88%90%ef%bc%8c%e6%98%af%e5%90%a6%e8%bf%87%e6%9c%9f%e7%9a%84%e5%88%a4%e5%ae%9a%e6%9c%80%e7%bb%88%e9%9c%80%e8%a6%81%e5%8f%82%e8%80%83%e5%ae%a2%e6%88%b7%e7%ab%af%e6%97%b6%e9%97%b4%e3%80%82%e5%ae%a2%e6%88%b7%e7%ab%af%e5%92%8c%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%97%b6%e9%97%b4%e5%8f%af%e8%83%bd%e4%b8%8d%e4%b8%80%e8%87%b4%ef%bc%8c%e8%80%8c%e4%b8%94%e5%ae%a2%e6%88%b7%e7%ab%af%e7%9a%84%e6%97%b6%e9%97%b4%e6%98%af%e5%8f%af%e4%bb%a5%e8%87%aa%e8%a1%8c%e4%bf%ae%e6%94%b9%e7%9a%84%ef%bc%8c%e4%bf%ae%e6%94%b9%e5%ae%a2%e6%88%b7%e7%ab%af%e6%97%b6%e9%97%b4%e5%8f%af%e8%83%bd%e5%af%bc%e8%87%b4%e7%bc%93%e5%ad%98%e5%a4%b1%e6%95%88%ef%bc%88%e5%a6%82%e6%b5%8f%e8%a7%88%e5%99%a8%e6%97%b6%e9%97%b4%e5%8f%82%e8%80%83%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f%e6%97%b6%e9%97%b4%ef%bc%8c%e4%bf%ae%e6%94%b9%e7%b3%bb%e7%bb%9f%e6%97%b6%e9%97%b4%e4%bc%9a%e5%bd%b1%e5%93%8d%e5%88%b0%e7%bc%93%e5%ad%98%ef%bc%89%ef%bc%8c%e6%89%80%e4%bb%a5%e4%b8%8d%e4%b8%80%e5%ae%9a%e6%bb%a1%e8%b6%b3%e9%a2%84%e6%9c%9f%e3%80%82%0aCache-Control%20%e4%b8%ba%e5%bc%a5%e8%a1%a5%20Expires%20%e7%9a%84%e7%bc%ba%e7%82%b9%ef%bc%8cHTTP%2f1.1%20%e6%96%b0%e5%a2%9e%e4%ba%86%20Cache-Control%20%e9%80%9a%e7%94%a8%e9%a6%96%e9%83%a8%e5%ad%97%e6%ae%b5%ef%bc%8c%e6%97%b6%e9%97%b4%e5%80%bc%e4%b8%ba%e7%9b%b8%e5%af%b9%e6%97%b6%e9%97%b4%ef%bc%8c%e4%b8%94%e4%b8%8d%e4%be%9d%e8%b5%96%e5%ae%a2%e6%88%b7%e7%ab%af%e6%97%b6%e9%97%b4%ef%bc%8c%e4%bc%98%e5%85%88%e7%ba%a7%e9%ab%98%e4%ba%8e%20Expires%e3%80%82%0a%20%20%20%e6%8c%87%e4%bb%a4%20%e7%b1%bb%e5%9e%8b%20%e8%af%b4%e6%98%8e%20%20%20%20%20no-cache%20%e9%80%9a%e7%94%a8%20%e8%b5%84%e6%ba%90%e6%ad%a3%e5%b8%b8%e7%bc%93%e5%ad%98%ef%bc%8c%e4%bd%86%e4%bd%bf%e7%94%a8%e5%89%8d%e5%bf%85%e9%a1%bb%e8%bf%9b%e8%a1%8c%e5%8d%8f%e5%95%86%e6%a0%a1%e9%aa%8c%20%20%20no-store%20%e9%80%9a%e7%94%a8%20%e7%a6%81%e7%94%a8%e6%89%80%e6%9c%89%e7%bc%93%e5%ad%98%ef%bc%8c%e4%bb%8e%e6%ba%90%e6%9c%8d%e5%8a%a1%e5%99%a8%e8%8e%b7%e5%8f%96%e8%b5%84%e6%ba%90%20%20%20public%20%e5%93%8d%e5%ba%94%20%e5%85%b1%e4%ba%ab%e7%bc%93%e5%ad%98%ef%bc%88%e4%b8%ad%e9%97%b4%e4%bb%a3%e7%90%86%e5%92%8c%20CDN%e7%ad%89%ef%bc%89%e5%92%8c%e7%a7%81%e6%9c%89%e7%bc%93%e5%ad%98%ef%bc%88%e5%ae%a2%e6%88%b7%e7%ab%af%ef%bc%89%e9%83%bd%e5%8f%af%e4%bb%a5%e7%bc%93%e5%ad%98%e5%93%8d%e5%ba%94%ef%bc%8c%e7%bc%ba%e7%9c%81%e5%80%bc%e4%b8%ba%20private%20%20%20private%20%e5%93%8d%e5%ba%94%20%e5%8f%aa%e6%9c%89%e7%a7%81%e6%9c%89%e7%bc%93%e5%ad%98%e5%8f%af%e4%bb%a5%e7%bc%93%e5%ad%98%e5%93%8d%e5%ba%94%20%20%20max-age%20%3d%20N%20%e5%93%8d%e5%ba%94%20%e7%bc%93%e5%ad%98%e6%9c%89%e6%95%88%e6%9c%9f%ef%bc%88%e5%8d%95%e4%bd%8d%e7%a7%92%ef%bc%89%ef%bc%8c%e4%b8%ba%200%20%e6%97%b6%e4%b8%8e%20no-cache%20%e6%95%88%e6%9e%9c%e4%b8%80%e8%87%b4%20%20%20s-maxage%20%3d%20N%20%e5%93%8d%e5%ba%94%20%e8%a6%86%e7%9b%96%20max-age%ef%bc%8c%e5%8f%aa%e9%80%82%e7%94%a8%e4%ba%8e%e5%85%b1%e4%ba%ab%e7%bc%93%e5%ad%98%ef%bc%8c%e7%a7%81%e6%9c%89%e7%bc%93%e5%ad%98%e4%bc%9a%e5%bf%bd%e7%95%a5%20%20%20must-revalidation%20%e5%93%8d%e5%ba%94%20%e5%9c%a8%e7%bc%93%e5%ad%98%e8%bf%87%e6%9c%9f%e5%89%8d%e5%8f%af%e4%bb%a5%e4%bd%bf%e7%94%a8%ef%bc%8c%e8%bf%87%e6%9c%9f%ef%bc%88%e5%a6%82%e7%bc%93%e5%ad%98%e6%97%b6%e9%97%b4%e8%b6%85%e8%bf%87%20max-age%ef%bc%89%e5%90%8e%e5%bf%85%e9%a1%bb%e5%90%91%e6%9c%8d%e5%8a%a1%e5%99%a8%e9%aa%8c%e8%af%81%20%20%20proxy-revalidation%20%e5%93%8d%e5%ba%94%20%e4%b8%8e%20must-revalidate%20%e4%bd%9c%e7%94%a8%e7%9b%b8%e5%90%8c%ef%bc%8c%e4%bd%86%e4%bb%85%e9%80%82%e7%94%a8%e4%ba%8e%e5%85%b1%e4%ba%ab%e7%bc%93%e5%ad%98%ef%bc%8c%e7%a7%81%e6%9c%89%e7%bc%93%e5%ad%98%e4%bc%9a%e5%bf%bd%e7%95%a5%e3%80%82%20%20%20no-transform%20%e9%80%9a%e7%94%a8%20%e4%bb%a3%e7%90%86%e4%b8%8d%e5%8f%af%e6%9b%b4%e6%94%b9%e5%aa%92%e4%bd%93%e7%b1%bb%e5%9e%8b%e5%a6%82%20Content-Encoding%e3%80%81Content-Range%e3%80%81Content-Type%20%20%20%20%e5%af%b9%e4%ba%8e%e9%82%a3%e4%ba%9b%e6%94%b9%e5%8a%a8%e9%a2%91%e7%8e%87%e6%9e%81%e4%bd%8e%e7%9a%84%e8%b5%84%e6%ba%90%e5%a6%82%20CSS%20%e6%88%96%20JS%20%e5%ba%93%ef%bc%8c%e5%b8%b8%e8%a7%81%e7%9a%84%e5%81%9a%e6%b3%95%e6%98%af%e5%b0%86%20max-age%20%e7%9a%84%e5%80%bc%e8%ae%be%e4%b8%ba%2031536000%ef%bc%8c%e4%bb%a3%e8%a1%a8%e4%b8%80%e5%b9%b4%e5%86%85%e7%bc%93%e5%ad%98%e6%9c%89%e6%95%88%e3%80%82%e5%a6%82%e6%9e%9c%e5%9c%a8%e7%bc%93%e5%ad%98%e6%9c%89%e6%95%88%e6%9c%9f%e5%86%85%ef%bc%8c%e5%86%85%e5%ae%b9%e8%b5%84%e6%ba%90%e5%86%85%e5%ae%b9%e5%8f%91%e7%94%9f%e4%ba%86%e6%94%b9%e5%8a%a8%ef%bc%8c%e5%8f%af%e4%bb%a5%e4%bf%ae%e6%94%b9%e8%b5%84%e6%ba%90%e5%90%8d%e7%a7%b0%ef%bc%8c%e5%a6%82%e5%9c%a8%e8%b5%84%e6%ba%90%e5%90%8d%e7%a7%b0%e4%b8%ad%e5%8a%a0%e7%89%88%e6%9c%ac%e5%8f%b7%e6%88%96%e7%94%9f%e6%88%90%e9%9a%8f%e6%9c%ba%20hash%e3%80%82" aria-label="Tumblr">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=%2fposts%2fhttp-%25E7%25BC%2593%25E5%25AD%2598%25E6%259C%25BA%25E5%2588%25B6%2f&t=HTTP%20%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6" aria-label="Hacker News">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    
    <div id="toc">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#强缓存">强缓存</a>
      <ul>
        <li><a href="#expires">Expires</a></li>
        <li><a href="#cache-control">Cache-Control</a></li>
        <li><a href="#pragma">Pragma</a></li>
      </ul>
    </li>
    <li><a href="#协商缓存">协商缓存</a>
      <ul>
        <li><a href="#last-modified">Last-Modified</a></li>
        <li><a href="#etag">Etag</a>
          <ul>
            <li><a href="#if-unmodified-since-和-if-match">If-Unmodified-Since 和 If-Match</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#浏览器缓存">浏览器缓存</a>
      <ul>
        <li><a href="#ajax-和-fetch">AJAX 和 Fetch</a></li>
        <li><a href="#用户行为">用户行为</a></li>
      </ul>
    </li>
    <li><a href="#其它缓存首部字段">其它缓存首部字段</a>
      <ul>
        <li><a href="#date">Date</a></li>
        <li><a href="#age">Age</a></li>
        <li><a href="#vary">Vary</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
    
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        HTTP 缓存机制
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2021-01-09 12:26:02 &#43;0800 CST" itemprop="datePublished">2021-01-09</time>
          
        </div>
        
        
        <div class="article-read-time">
          <i class="far fa-clock"></i>
          
          15 minute read
        </div>
        
        
        
        <div class="article-tag">
            <i class="fas fa-tag"></i>
            
            
            <a class="tag-link" href="/tags/http" rel="tag">HTTP</a>
            
        </div>
        
      </div>
    </header>

  
    
    <div class="content" itemprop="articleBody">
      <p>HTTP 缓存通过资源复用，可以减轻服务器负担，显著提高网站和应用程序的性能。HTTP 缓存主要有客户端缓存和代理缓存，其它还包括网关缓存、CDN、反向代理缓存和负载均衡器等部署在服务器上的缓存方式。HTTP 缓存主要存储 GET 响应。</p>
<p>以 Chrome 为例，打开新标签页后调出 DevTools，将功能切至 NetWork，首次访问  Google 搜索页面，能看到请求：</p>
<p><img src="/HTTP%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6/google_first_time.png" alt="google_first_time"></p>
<p><code>ctrl + r</code> 刷新页面，可看到请求：</p>
<p><img src="/HTTP%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6/google_next_time.png" alt="google_next_time"></p>
<p>在 Size 一栏中，可以看到部分资源来自 Memory Cache，部分来自 Disk Cache，其余从服务器获取。在首次访问页面之后，浏览器会将资源缓存，后续访问这些资源时，可直接从缓存中获取，不必再从服务器下载。</p>
<p>根据是否需要重新向服务器发起请求来分类，可以将 HTTP 缓存分为两类：强缓存和协商缓存。强缓存如果生效，不需要再和服务器发生交互，而协商缓存不管是否生效，都需要与服务端发生交互。<strong>强缓存的优先级高于协商缓存</strong>。</p>
<h2 id="强缓存">强缓存</h2>
<p>强缓存指首次向服务器发起资源请求后，服务器会告知客户端资源缓存的有效时间，有效期内直接从客户端缓存中读取，不必与服务器交互。强缓存通过 Expires 和 Cache-Control 首部字段来实现，<strong>后者优先级更高</strong>。</p>
<h3 id="expires">Expires</h3>
<p>HTTP/1.0 定义了 Expires 响应首部字段，用于告知客户端资源缓存的过期时间，在过期时间之前请求资源直接使用缓存，不需要再次请求服务器（排除其它首部字段干扰的情况下）。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>Expires: Mon, 25 Jan 2021 23:04:06 GMT
</code></pre></div><p>Expires 过期时间由服务器生成，是否过期的判定最终需要参考客户端时间。客户端和服务器时间可能不一致，而且客户端的时间是可以自行修改的，修改客户端时间可能导致缓存失效（如浏览器时间参考操作系统时间，修改系统时间会影响到缓存），所以不一定满足预期。</p>
<h3 id="cache-control">Cache-Control</h3>
<p>为弥补 Expires 的缺点，HTTP/1.1 新增了 Cache-Control 通用首部字段，时间值为相对时间，且<strong>不依赖客户端时间</strong>，优先级高于 Expires。</p>
<table>
<thead>
<tr>
<th>指令</th>
<th style="text-align:left">类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>no-cache</td>
<td style="text-align:left">通用</td>
<td>资源正常缓存，但使用前必须进行协商校验</td>
</tr>
<tr>
<td>no-store</td>
<td style="text-align:left">通用</td>
<td>禁用所有缓存，从源服务器获取资源</td>
</tr>
<tr>
<td>public</td>
<td style="text-align:left">响应</td>
<td>共享缓存（中间代理和 CDN等）和私有缓存（客户端）都可以缓存响应，缺省值为 private</td>
</tr>
<tr>
<td>private</td>
<td style="text-align:left">响应</td>
<td>只有私有缓存可以缓存响应</td>
</tr>
<tr>
<td>max-age = N</td>
<td style="text-align:left">响应</td>
<td>缓存有效期（单位秒），为 0 时与 no-cache 效果一致</td>
</tr>
<tr>
<td>s-maxage = N</td>
<td style="text-align:left">响应</td>
<td>覆盖 max-age，只适用于共享缓存，私有缓存会忽略</td>
</tr>
<tr>
<td>must-revalidation</td>
<td style="text-align:left">响应</td>
<td>在缓存过期前可以使用，过期（如缓存时间超过 max-age）后必须向服务器验证</td>
</tr>
<tr>
<td>proxy-revalidation</td>
<td style="text-align:left">响应</td>
<td>与 must-revalidate 作用相同，但仅适用于共享缓存，私有缓存会忽略。</td>
</tr>
<tr>
<td>no-transform</td>
<td style="text-align:left">通用</td>
<td>代理不可更改媒体类型如 Content-Encoding、Content-Range、Content-Type</td>
</tr>
</tbody>
</table>
<p>对于那些改动频率极低的资源如 CSS 或 JS 库，常见的做法是将 max-age 的值设为 31536000，代表一年内缓存有效。如果在缓存有效期内，内容资源内容发生了改动，可以修改资源名称，如在资源名称中加版本号或生成随机 hash。</p>
<h3 id="pragma">Pragma</h3>
<p>Pragma 是 HTTP/1.0 标准中定义的一个首部字段，Pragma 只有一个值 no-cache，效果跟 <code>Cache-Control: no-cache</code> 效果相同，请求中一般会额外添加 Pragma 以兼容基于 HTTP/1.0 的服务器。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>Cache-Control: no-cache
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>Pragma: no-cache
</code></pre></div><h2 id="协商缓存">协商缓存</h2>
<p>协商缓存是指在强缓存失效后，客户端携带缓存标识向服务器发起请求，由服务器根据缓存标识来决定是否使用缓存，缓存有效返回 304 Not Modified，否则返回响应内容。协商缓存使用 「Last-Modified/If-Modified-Since」和「ETag/If-None-Match」两对首部字段作为标识确定缓存是否有效，<strong>后者优先级更高</strong>。</p>
<h3 id="last-modified">Last-Modified</h3>
<p>客户端首次访问资源时，服务器返回首部字段 Last-Modified 表明资源在服务器最近修改的时间，客户端在后续请求资源时会将这个时间放在请求首部的 If-Modified-Since 中。服务器收到这个请求，会对比 If-Modified-Since 和服务器上这个资源的最后修改时间：如果一致就返回 304 Not Modified，让客户端直接从缓存里读取；如果 If-Modified-Since 的时间小于服务器中这个资源的最后修改时间，说明文件有新的编辑，缓存失效，返回新的资源文件。</p>
<h3 id="etag">Etag</h3>
<p>客户端首次访问资源时，服务器返回首部字段 Etag，Etag 是服务器响应请求时，返回当前资源文件的一个唯一标识，客户端在后续请求此资源的时会将 Etag 值放在请求首部的 If-None-Match 中。服务器收到这个请求，会对比 If-None-Match 和服务器上这个资源的 Etag：如果一致就返回 304 Not Modified，让客户端直接从缓存里读取；否则说明文件内容有更新，缓存失效，返回新的资源文件。</p>
<p>Etag 的值为 W/ 开头时，说明使用的是弱 Etag。弱 Etag 匹配只要求两个资源在语义上相等，强 Etag 匹配要求其它实体字段如 Content-Language 也要一致。</p>
<p>若资源是分布式服务器（如 CDN）存储的情况，需要这些服务器上计算 ETag 的算法保持一致，才不会导致同一个文件，多台服务器返回的 ETag 却不一样。</p>
<h4 id="if-unmodified-since-和-if-match">If-Unmodified-Since 和 If-Match</h4>
<p>这两个请求首部字段与缓存关系不大，If-Unmodified-Since 条件请求是只有当资源在指定的时间之后没有修改的情况下，服务器才会返回请求的资源，或是接受 POST 或其它 non-safe 方法的请求。如果所请求的资源在指定的时间之后发生了修改，那么会返回 412 Precondition Failed 错误。</p>
<p>If-Match 条件请求在请求方法为 GET 和 HEAD 的情况下，服务器仅在请求的资源满足此首部列出的 ETag 值时才会返回资源。而对于 PUT 或其它非安全方法来说，只有在满足条件的情况下才可以将资源上传。</p>
<h2 id="浏览器缓存">浏览器缓存</h2>
<p>前面提到的强缓存和协商缓存根本上来说是缓存策略，资源具体的缓存位置实际只有内存和磁盘，在浏览器中包括非持久化的 Memory Cache、Push Cache 和持久化的 Disk Cache、Service Worker 共四类缓存。</p>
<p>Memory Cache 有效时间不超过 Tab 的存活周期，Tab 被关闭时释放，具体释放时机取决于浏览器策略。Memory Cache 会忽略 Cache-Control 被标记为 max-age=0 或 no-cache 的情况，此时资源仍可被放入 Memory Cache ，当值为 no-store 时，才不会被放入 Memory Cache。</p>
<p>Memory Cache 使得页面中的同一地址资源只需要进行一次请求，但当请求类型不同时，不会使用 Memory Cache，如脚本和样式表使用同一地址资源，会进行两次请求。预加载资源一般也存放在 Memory Cache 中。</p>
<p>Service Worker 是运行在浏览器中的独立线程，可实现离线缓存、消息推送和网络代理等功能，而 Push Cache 是 HTTP/2 中的新内容。</p>
<p>浏览器缓存调用的优先关系是：Memory Cache &gt; Service Worker &gt;  Disk Cache &gt; Push Cache，若在以上四个缓存中均未找到有效的缓存资源，将对服务器发起资源的请求。</p>
<h3 id="ajax-和-fetch">AJAX 和 Fetch</h3>
<p>Ajax 和 Fetch 中的 Get 请求通常会被用作等幂操作，前面讨论的 HTTP 缓存机制依然适用。</p>
<h3 id="用户行为">用户行为</h3>
<p>用户行为对浏览器缓存的影响有以下几种（仅讨论 Memory Cache 和 Disk Cache）：</p>
<ul>
<li>Tab 输入 URI 回车：先检测强缓存是否有效，有效则从 Disk Cache 获取资源；强缓存无效则发送请求协商，若协商缓存有效服务器返回 304 状态码，浏览器依旧从 Disk Cache 获取资源；协商缓存也无效时，服务器会返回资源内容主体。</li>
<li>普通刷新：首先查看 Memory Cache 是否有效，有效直接从 Memory Cache 获取资源；无效则按「Tab 输入 URI 回车」步骤执行。</li>
<li>强制刷新：浏览器不使用任何本地缓存而直接发送请求，头部带有 <code>Cache-Control: no-cache</code> 和 <code>Pragma: no-cache</code>，并且<strong>不会在请求中携带协商缓存字段</strong>。</li>
<li>DevTools 选中 Disable Cache：效果与「强制刷新」一样</li>
</ul>
<p>以上使用强制刷新，只是代表浏览器不使用任何本地缓存，但代理缓存依旧可能生效。</p>
<h2 id="其它缓存首部字段">其它缓存首部字段</h2>
<h3 id="date">Date</h3>
<p>Date 通用首部包含了报文创建的日期和时间。Date 在响应中说明响应生成的时间，请求经过代理服务器时, 返回的 Date 未必是最新的，通常这个时候，代理服务器将增加一个 Age 字段告知该资源已缓存了多久。</p>
<h3 id="age">Age</h3>
<p>Age 响应首部字段里包含资源在缓存代理中存贮的时长，单位为秒。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>Age: 40152
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>Date: Fri, 05 Feb 2021 16:58:00 GMT
</code></pre></div><p>以上响应意为代理服务器在 2021 年 2 月 5 日 16:58:00 时向源服务器发起了对该资源的请求，目前已缓存了该资源 741427 秒。</p>
<h3 id="vary">Vary</h3>
<p>通过 Vary 响应首部字段，源服务器会向代理服务器传达关于本地缓存使用方法的指令。代理服务器接收到源服务器包含 Vary 的响应后，缓存对应资源，后续仅对 <strong>Vary 值属性一样的请求</strong>返回此缓存。即使对相同资源发起请求，但由于 Vary 指定的首部字段不相同，因此必须要从源服务器重新获取资源。</p>
<p>举例来说，同一 URL 的资源，根据客户端 Accept-Language 值的不同，需要内容不同的资源文件。中文客户端用户请求资源后，代理服务器进行了缓存：如果没有指定 <code>Vary: Accept-Language</code>，那么后续所有客户端将只能使用这份中文内容的缓存；如果指定 <code>Vary: Accept-Language</code>，那么只有中文客户端才会使用代理服务器的这份缓存。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-http" data-lang="http"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>Vary: Accept-Encoding, Accept-Language, User-Agent
</code></pre></div><p>如上设置，代理服务器将根据客户端支持的编码类型、自然语言和用户代理（如 PC、Android、iOS 等）三个方面去缓存资源。如此，同一路径的资源，就能针对这三者的不同，返回对应的缓存内容，避免返回同一缓存。</p>

    </div>
  </article>

  
  






  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/posts">Writings</a></li>
         
          <li><a href="/tags">Tags</a></li>
         
          <li><a href="/about">About</a></li>
        
      </ul>
    </div>

    
    <div id="toc-footer" style="display: none">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#强缓存">强缓存</a>
      <ul>
        <li><a href="#expires">Expires</a></li>
        <li><a href="#cache-control">Cache-Control</a></li>
        <li><a href="#pragma">Pragma</a></li>
      </ul>
    </li>
    <li><a href="#协商缓存">协商缓存</a>
      <ul>
        <li><a href="#last-modified">Last-Modified</a></li>
        <li><a href="#etag">Etag</a>
          <ul>
            <li><a href="#if-unmodified-since-和-if-match">If-Unmodified-Since 和 If-Match</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#浏览器缓存">浏览器缓存</a>
      <ul>
        <li><a href="#ajax-和-fetch">AJAX 和 Fetch</a></li>
        <li><a href="#用户行为">用户行为</a></li>
      </ul>
    </li>
    <li><a href="#其它缓存首部字段">其它缓存首部字段</a>
      <ul>
        <li><a href="#date">Date</a></li>
        <li><a href="#age">Age</a></li>
        <li><a href="#vary">Vary</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
    

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=%2fposts%2fhttp-%25E7%25BC%2593%25E5%25AD%2598%25E6%259C%25BA%25E5%2588%25B6%2f" aria-label="Facebook">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=%2fposts%2fhttp-%25E7%25BC%2593%25E5%25AD%2598%25E6%259C%25BA%25E5%2588%25B6%2f&text=HTTP%20%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6" aria-label="Twitter">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=%2fposts%2fhttp-%25E7%25BC%2593%25E5%25AD%2598%25E6%259C%25BA%25E5%2588%25B6%2f&title=HTTP%20%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6" aria-label="Linkedin">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=%2fposts%2fhttp-%25E7%25BC%2593%25E5%25AD%2598%25E6%259C%25BA%25E5%2588%25B6%2f&is_video=false&description=HTTP%20%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6" aria-label="Pinterest">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=HTTP%20%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6&body=Check out this article: %2fposts%2fhttp-%25E7%25BC%2593%25E5%25AD%2598%25E6%259C%25BA%25E5%2588%25B6%2f" aria-label="Email">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=%2fposts%2fhttp-%25E7%25BC%2593%25E5%25AD%2598%25E6%259C%25BA%25E5%2588%25B6%2f&title=HTTP%20%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6" aria-label="Pocket">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=%2fposts%2fhttp-%25E7%25BC%2593%25E5%25AD%2598%25E6%259C%25BA%25E5%2588%25B6%2f&title=HTTP%20%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6" aria-label="reddit">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=%2fposts%2fhttp-%25E7%25BC%2593%25E5%25AD%2598%25E6%259C%25BA%25E5%2588%25B6%2f&name=HTTP%20%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6&description=HTTP%20%e7%bc%93%e5%ad%98%e9%80%9a%e8%bf%87%e8%b5%84%e6%ba%90%e5%a4%8d%e7%94%a8%ef%bc%8c%e5%8f%af%e4%bb%a5%e5%87%8f%e8%bd%bb%e6%9c%8d%e5%8a%a1%e5%99%a8%e8%b4%9f%e6%8b%85%ef%bc%8c%e6%98%be%e8%91%97%e6%8f%90%e9%ab%98%e7%bd%91%e7%ab%99%e5%92%8c%e5%ba%94%e7%94%a8%e7%a8%8b%e5%ba%8f%e7%9a%84%e6%80%a7%e8%83%bd%e3%80%82HTTP%20%e7%bc%93%e5%ad%98%e4%b8%bb%e8%a6%81%e6%9c%89%e5%ae%a2%e6%88%b7%e7%ab%af%e7%bc%93%e5%ad%98%e5%92%8c%e4%bb%a3%e7%90%86%e7%bc%93%e5%ad%98%ef%bc%8c%e5%85%b6%e5%ae%83%e8%bf%98%e5%8c%85%e6%8b%ac%e7%bd%91%e5%85%b3%e7%bc%93%e5%ad%98%e3%80%81CDN%e3%80%81%e5%8f%8d%e5%90%91%e4%bb%a3%e7%90%86%e7%bc%93%e5%ad%98%e5%92%8c%e8%b4%9f%e8%bd%bd%e5%9d%87%e8%a1%a1%e5%99%a8%e7%ad%89%e9%83%a8%e7%bd%b2%e5%9c%a8%e6%9c%8d%e5%8a%a1%e5%99%a8%e4%b8%8a%e7%9a%84%e7%bc%93%e5%ad%98%e6%96%b9%e5%bc%8f%e3%80%82HTTP%20%e7%bc%93%e5%ad%98%e4%b8%bb%e8%a6%81%e5%ad%98%e5%82%a8%20GET%20%e5%93%8d%e5%ba%94%e3%80%82%0a%e4%bb%a5%20Chrome%20%e4%b8%ba%e4%be%8b%ef%bc%8c%e6%89%93%e5%bc%80%e6%96%b0%e6%a0%87%e7%ad%be%e9%a1%b5%e5%90%8e%e8%b0%83%e5%87%ba%20DevTools%ef%bc%8c%e5%b0%86%e5%8a%9f%e8%83%bd%e5%88%87%e8%87%b3%20NetWork%ef%bc%8c%e9%a6%96%e6%ac%a1%e8%ae%bf%e9%97%ae%20Google%20%e6%90%9c%e7%b4%a2%e9%a1%b5%e9%9d%a2%ef%bc%8c%e8%83%bd%e7%9c%8b%e5%88%b0%e8%af%b7%e6%b1%82%ef%bc%9a%0actrl%20%2b%20r%20%e5%88%b7%e6%96%b0%e9%a1%b5%e9%9d%a2%ef%bc%8c%e5%8f%af%e7%9c%8b%e5%88%b0%e8%af%b7%e6%b1%82%ef%bc%9a%0a%e5%9c%a8%20Size%20%e4%b8%80%e6%a0%8f%e4%b8%ad%ef%bc%8c%e5%8f%af%e4%bb%a5%e7%9c%8b%e5%88%b0%e9%83%a8%e5%88%86%e8%b5%84%e6%ba%90%e6%9d%a5%e8%87%aa%20Memory%20Cache%ef%bc%8c%e9%83%a8%e5%88%86%e6%9d%a5%e8%87%aa%20Disk%20Cache%ef%bc%8c%e5%85%b6%e4%bd%99%e4%bb%8e%e6%9c%8d%e5%8a%a1%e5%99%a8%e8%8e%b7%e5%8f%96%e3%80%82%e5%9c%a8%e9%a6%96%e6%ac%a1%e8%ae%bf%e9%97%ae%e9%a1%b5%e9%9d%a2%e4%b9%8b%e5%90%8e%ef%bc%8c%e6%b5%8f%e8%a7%88%e5%99%a8%e4%bc%9a%e5%b0%86%e8%b5%84%e6%ba%90%e7%bc%93%e5%ad%98%ef%bc%8c%e5%90%8e%e7%bb%ad%e8%ae%bf%e9%97%ae%e8%bf%99%e4%ba%9b%e8%b5%84%e6%ba%90%e6%97%b6%ef%bc%8c%e5%8f%af%e7%9b%b4%e6%8e%a5%e4%bb%8e%e7%bc%93%e5%ad%98%e4%b8%ad%e8%8e%b7%e5%8f%96%ef%bc%8c%e4%b8%8d%e5%bf%85%e5%86%8d%e4%bb%8e%e6%9c%8d%e5%8a%a1%e5%99%a8%e4%b8%8b%e8%bd%bd%e3%80%82%0a%e6%a0%b9%e6%8d%ae%e6%98%af%e5%90%a6%e9%9c%80%e8%a6%81%e9%87%8d%e6%96%b0%e5%90%91%e6%9c%8d%e5%8a%a1%e5%99%a8%e5%8f%91%e8%b5%b7%e8%af%b7%e6%b1%82%e6%9d%a5%e5%88%86%e7%b1%bb%ef%bc%8c%e5%8f%af%e4%bb%a5%e5%b0%86%20HTTP%20%e7%bc%93%e5%ad%98%e5%88%86%e4%b8%ba%e4%b8%a4%e7%b1%bb%ef%bc%9a%e5%bc%ba%e7%bc%93%e5%ad%98%e5%92%8c%e5%8d%8f%e5%95%86%e7%bc%93%e5%ad%98%e3%80%82%e5%bc%ba%e7%bc%93%e5%ad%98%e5%a6%82%e6%9e%9c%e7%94%9f%e6%95%88%ef%bc%8c%e4%b8%8d%e9%9c%80%e8%a6%81%e5%86%8d%e5%92%8c%e6%9c%8d%e5%8a%a1%e5%99%a8%e5%8f%91%e7%94%9f%e4%ba%a4%e4%ba%92%ef%bc%8c%e8%80%8c%e5%8d%8f%e5%95%86%e7%bc%93%e5%ad%98%e4%b8%8d%e7%ae%a1%e6%98%af%e5%90%a6%e7%94%9f%e6%95%88%ef%bc%8c%e9%83%bd%e9%9c%80%e8%a6%81%e4%b8%8e%e6%9c%8d%e5%8a%a1%e7%ab%af%e5%8f%91%e7%94%9f%e4%ba%a4%e4%ba%92%e3%80%82%e5%bc%ba%e7%bc%93%e5%ad%98%e7%9a%84%e4%bc%98%e5%85%88%e7%ba%a7%e9%ab%98%e4%ba%8e%e5%8d%8f%e5%95%86%e7%bc%93%e5%ad%98%e3%80%82%0a%e5%bc%ba%e7%bc%93%e5%ad%98%20%e5%bc%ba%e7%bc%93%e5%ad%98%e6%8c%87%e9%a6%96%e6%ac%a1%e5%90%91%e6%9c%8d%e5%8a%a1%e5%99%a8%e5%8f%91%e8%b5%b7%e8%b5%84%e6%ba%90%e8%af%b7%e6%b1%82%e5%90%8e%ef%bc%8c%e6%9c%8d%e5%8a%a1%e5%99%a8%e4%bc%9a%e5%91%8a%e7%9f%a5%e5%ae%a2%e6%88%b7%e7%ab%af%e8%b5%84%e6%ba%90%e7%bc%93%e5%ad%98%e7%9a%84%e6%9c%89%e6%95%88%e6%97%b6%e9%97%b4%ef%bc%8c%e6%9c%89%e6%95%88%e6%9c%9f%e5%86%85%e7%9b%b4%e6%8e%a5%e4%bb%8e%e5%ae%a2%e6%88%b7%e7%ab%af%e7%bc%93%e5%ad%98%e4%b8%ad%e8%af%bb%e5%8f%96%ef%bc%8c%e4%b8%8d%e5%bf%85%e4%b8%8e%e6%9c%8d%e5%8a%a1%e5%99%a8%e4%ba%a4%e4%ba%92%e3%80%82%e5%bc%ba%e7%bc%93%e5%ad%98%e9%80%9a%e8%bf%87%20Expires%20%e5%92%8c%20Cache-Control%20%e9%a6%96%e9%83%a8%e5%ad%97%e6%ae%b5%e6%9d%a5%e5%ae%9e%e7%8e%b0%ef%bc%8c%e5%90%8e%e8%80%85%e4%bc%98%e5%85%88%e7%ba%a7%e6%9b%b4%e9%ab%98%e3%80%82%0aExpires%20HTTP%2f1.0%20%e5%ae%9a%e4%b9%89%e4%ba%86%20Expires%20%e5%93%8d%e5%ba%94%e9%a6%96%e9%83%a8%e5%ad%97%e6%ae%b5%ef%bc%8c%e7%94%a8%e4%ba%8e%e5%91%8a%e7%9f%a5%e5%ae%a2%e6%88%b7%e7%ab%af%e8%b5%84%e6%ba%90%e7%bc%93%e5%ad%98%e7%9a%84%e8%bf%87%e6%9c%9f%e6%97%b6%e9%97%b4%ef%bc%8c%e5%9c%a8%e8%bf%87%e6%9c%9f%e6%97%b6%e9%97%b4%e4%b9%8b%e5%89%8d%e8%af%b7%e6%b1%82%e8%b5%84%e6%ba%90%e7%9b%b4%e6%8e%a5%e4%bd%bf%e7%94%a8%e7%bc%93%e5%ad%98%ef%bc%8c%e4%b8%8d%e9%9c%80%e8%a6%81%e5%86%8d%e6%ac%a1%e8%af%b7%e6%b1%82%e6%9c%8d%e5%8a%a1%e5%99%a8%ef%bc%88%e6%8e%92%e9%99%a4%e5%85%b6%e5%ae%83%e9%a6%96%e9%83%a8%e5%ad%97%e6%ae%b5%e5%b9%b2%e6%89%b0%e7%9a%84%e6%83%85%e5%86%b5%e4%b8%8b%ef%bc%89%e3%80%82%0a1Expires%3a%20Mon%2c%2025%20Jan%202021%2023%3a04%3a06%20GMT%20Expires%20%e8%bf%87%e6%9c%9f%e6%97%b6%e9%97%b4%e7%94%b1%e6%9c%8d%e5%8a%a1%e5%99%a8%e7%94%9f%e6%88%90%ef%bc%8c%e6%98%af%e5%90%a6%e8%bf%87%e6%9c%9f%e7%9a%84%e5%88%a4%e5%ae%9a%e6%9c%80%e7%bb%88%e9%9c%80%e8%a6%81%e5%8f%82%e8%80%83%e5%ae%a2%e6%88%b7%e7%ab%af%e6%97%b6%e9%97%b4%e3%80%82%e5%ae%a2%e6%88%b7%e7%ab%af%e5%92%8c%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%97%b6%e9%97%b4%e5%8f%af%e8%83%bd%e4%b8%8d%e4%b8%80%e8%87%b4%ef%bc%8c%e8%80%8c%e4%b8%94%e5%ae%a2%e6%88%b7%e7%ab%af%e7%9a%84%e6%97%b6%e9%97%b4%e6%98%af%e5%8f%af%e4%bb%a5%e8%87%aa%e8%a1%8c%e4%bf%ae%e6%94%b9%e7%9a%84%ef%bc%8c%e4%bf%ae%e6%94%b9%e5%ae%a2%e6%88%b7%e7%ab%af%e6%97%b6%e9%97%b4%e5%8f%af%e8%83%bd%e5%af%bc%e8%87%b4%e7%bc%93%e5%ad%98%e5%a4%b1%e6%95%88%ef%bc%88%e5%a6%82%e6%b5%8f%e8%a7%88%e5%99%a8%e6%97%b6%e9%97%b4%e5%8f%82%e8%80%83%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f%e6%97%b6%e9%97%b4%ef%bc%8c%e4%bf%ae%e6%94%b9%e7%b3%bb%e7%bb%9f%e6%97%b6%e9%97%b4%e4%bc%9a%e5%bd%b1%e5%93%8d%e5%88%b0%e7%bc%93%e5%ad%98%ef%bc%89%ef%bc%8c%e6%89%80%e4%bb%a5%e4%b8%8d%e4%b8%80%e5%ae%9a%e6%bb%a1%e8%b6%b3%e9%a2%84%e6%9c%9f%e3%80%82%0aCache-Control%20%e4%b8%ba%e5%bc%a5%e8%a1%a5%20Expires%20%e7%9a%84%e7%bc%ba%e7%82%b9%ef%bc%8cHTTP%2f1.1%20%e6%96%b0%e5%a2%9e%e4%ba%86%20Cache-Control%20%e9%80%9a%e7%94%a8%e9%a6%96%e9%83%a8%e5%ad%97%e6%ae%b5%ef%bc%8c%e6%97%b6%e9%97%b4%e5%80%bc%e4%b8%ba%e7%9b%b8%e5%af%b9%e6%97%b6%e9%97%b4%ef%bc%8c%e4%b8%94%e4%b8%8d%e4%be%9d%e8%b5%96%e5%ae%a2%e6%88%b7%e7%ab%af%e6%97%b6%e9%97%b4%ef%bc%8c%e4%bc%98%e5%85%88%e7%ba%a7%e9%ab%98%e4%ba%8e%20Expires%e3%80%82%0a%20%20%20%e6%8c%87%e4%bb%a4%20%e7%b1%bb%e5%9e%8b%20%e8%af%b4%e6%98%8e%20%20%20%20%20no-cache%20%e9%80%9a%e7%94%a8%20%e8%b5%84%e6%ba%90%e6%ad%a3%e5%b8%b8%e7%bc%93%e5%ad%98%ef%bc%8c%e4%bd%86%e4%bd%bf%e7%94%a8%e5%89%8d%e5%bf%85%e9%a1%bb%e8%bf%9b%e8%a1%8c%e5%8d%8f%e5%95%86%e6%a0%a1%e9%aa%8c%20%20%20no-store%20%e9%80%9a%e7%94%a8%20%e7%a6%81%e7%94%a8%e6%89%80%e6%9c%89%e7%bc%93%e5%ad%98%ef%bc%8c%e4%bb%8e%e6%ba%90%e6%9c%8d%e5%8a%a1%e5%99%a8%e8%8e%b7%e5%8f%96%e8%b5%84%e6%ba%90%20%20%20public%20%e5%93%8d%e5%ba%94%20%e5%85%b1%e4%ba%ab%e7%bc%93%e5%ad%98%ef%bc%88%e4%b8%ad%e9%97%b4%e4%bb%a3%e7%90%86%e5%92%8c%20CDN%e7%ad%89%ef%bc%89%e5%92%8c%e7%a7%81%e6%9c%89%e7%bc%93%e5%ad%98%ef%bc%88%e5%ae%a2%e6%88%b7%e7%ab%af%ef%bc%89%e9%83%bd%e5%8f%af%e4%bb%a5%e7%bc%93%e5%ad%98%e5%93%8d%e5%ba%94%ef%bc%8c%e7%bc%ba%e7%9c%81%e5%80%bc%e4%b8%ba%20private%20%20%20private%20%e5%93%8d%e5%ba%94%20%e5%8f%aa%e6%9c%89%e7%a7%81%e6%9c%89%e7%bc%93%e5%ad%98%e5%8f%af%e4%bb%a5%e7%bc%93%e5%ad%98%e5%93%8d%e5%ba%94%20%20%20max-age%20%3d%20N%20%e5%93%8d%e5%ba%94%20%e7%bc%93%e5%ad%98%e6%9c%89%e6%95%88%e6%9c%9f%ef%bc%88%e5%8d%95%e4%bd%8d%e7%a7%92%ef%bc%89%ef%bc%8c%e4%b8%ba%200%20%e6%97%b6%e4%b8%8e%20no-cache%20%e6%95%88%e6%9e%9c%e4%b8%80%e8%87%b4%20%20%20s-maxage%20%3d%20N%20%e5%93%8d%e5%ba%94%20%e8%a6%86%e7%9b%96%20max-age%ef%bc%8c%e5%8f%aa%e9%80%82%e7%94%a8%e4%ba%8e%e5%85%b1%e4%ba%ab%e7%bc%93%e5%ad%98%ef%bc%8c%e7%a7%81%e6%9c%89%e7%bc%93%e5%ad%98%e4%bc%9a%e5%bf%bd%e7%95%a5%20%20%20must-revalidation%20%e5%93%8d%e5%ba%94%20%e5%9c%a8%e7%bc%93%e5%ad%98%e8%bf%87%e6%9c%9f%e5%89%8d%e5%8f%af%e4%bb%a5%e4%bd%bf%e7%94%a8%ef%bc%8c%e8%bf%87%e6%9c%9f%ef%bc%88%e5%a6%82%e7%bc%93%e5%ad%98%e6%97%b6%e9%97%b4%e8%b6%85%e8%bf%87%20max-age%ef%bc%89%e5%90%8e%e5%bf%85%e9%a1%bb%e5%90%91%e6%9c%8d%e5%8a%a1%e5%99%a8%e9%aa%8c%e8%af%81%20%20%20proxy-revalidation%20%e5%93%8d%e5%ba%94%20%e4%b8%8e%20must-revalidate%20%e4%bd%9c%e7%94%a8%e7%9b%b8%e5%90%8c%ef%bc%8c%e4%bd%86%e4%bb%85%e9%80%82%e7%94%a8%e4%ba%8e%e5%85%b1%e4%ba%ab%e7%bc%93%e5%ad%98%ef%bc%8c%e7%a7%81%e6%9c%89%e7%bc%93%e5%ad%98%e4%bc%9a%e5%bf%bd%e7%95%a5%e3%80%82%20%20%20no-transform%20%e9%80%9a%e7%94%a8%20%e4%bb%a3%e7%90%86%e4%b8%8d%e5%8f%af%e6%9b%b4%e6%94%b9%e5%aa%92%e4%bd%93%e7%b1%bb%e5%9e%8b%e5%a6%82%20Content-Encoding%e3%80%81Content-Range%e3%80%81Content-Type%20%20%20%20%e5%af%b9%e4%ba%8e%e9%82%a3%e4%ba%9b%e6%94%b9%e5%8a%a8%e9%a2%91%e7%8e%87%e6%9e%81%e4%bd%8e%e7%9a%84%e8%b5%84%e6%ba%90%e5%a6%82%20CSS%20%e6%88%96%20JS%20%e5%ba%93%ef%bc%8c%e5%b8%b8%e8%a7%81%e7%9a%84%e5%81%9a%e6%b3%95%e6%98%af%e5%b0%86%20max-age%20%e7%9a%84%e5%80%bc%e8%ae%be%e4%b8%ba%2031536000%ef%bc%8c%e4%bb%a3%e8%a1%a8%e4%b8%80%e5%b9%b4%e5%86%85%e7%bc%93%e5%ad%98%e6%9c%89%e6%95%88%e3%80%82%e5%a6%82%e6%9e%9c%e5%9c%a8%e7%bc%93%e5%ad%98%e6%9c%89%e6%95%88%e6%9c%9f%e5%86%85%ef%bc%8c%e5%86%85%e5%ae%b9%e8%b5%84%e6%ba%90%e5%86%85%e5%ae%b9%e5%8f%91%e7%94%9f%e4%ba%86%e6%94%b9%e5%8a%a8%ef%bc%8c%e5%8f%af%e4%bb%a5%e4%bf%ae%e6%94%b9%e8%b5%84%e6%ba%90%e5%90%8d%e7%a7%b0%ef%bc%8c%e5%a6%82%e5%9c%a8%e8%b5%84%e6%ba%90%e5%90%8d%e7%a7%b0%e4%b8%ad%e5%8a%a0%e7%89%88%e6%9c%ac%e5%8f%b7%e6%88%96%e7%94%9f%e6%88%90%e9%9a%8f%e6%9c%ba%20hash%e3%80%82" aria-label="Tumblr">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=%2fposts%2fhttp-%25E7%25BC%2593%25E5%25AD%2598%25E6%259C%25BA%25E5%2588%25B6%2f&t=HTTP%20%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6" aria-label="Hacker News">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu-toggle" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;" aria-label="Menu">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
        <a id="toc-toggle" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;" aria-label="TOC">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share-toggle" class="icon" href="#" onclick="$('#share-footer').toggle();return false;" aria-label="Share">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2022  GeekKery 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Writings</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>

<script src=/js/code-copy.js></script>




</html>
